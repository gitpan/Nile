<html><head><title>Nile::Plugin</title>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" >
</head>
<body class='pod'>
<!--
  generated by Pod::Simple::HTML v3.28,
  using Pod::Simple::PullParser v3.28,
  under Perl v5.016003 at Sun Aug 17 00:17:03 2014 GMT.

 If you want to change this HTML document, you probably shouldn't do that
   by changing it directly.  Instead, see about changing the calling options
   to Pod::Simple::HTML, and/or subclassing Pod::Simple::HTML,
   then reconverting this document from the Pod source.
   When in doubt, email the author of Pod::Simple::HTML for advice.
   See 'perldoc Pod::Simple::HTML' for more info.

-->

<!-- start doc -->
<a name='___top' class='dummyTopAnchor' ></a>

<h1><a class='u'
name="NAME"
>NAME</a></h1>

<p>Nile::Plugin - Plugin base class for the Nile framework.</p>

<h1><a class='u'
name="SYNOPSIS"
>SYNOPSIS</a></h1>

<h1><a class='u'
name="DESCRIPTION"
>DESCRIPTION</a></h1>

<p>Nile::Plugin - Plugin base class for the Nile framework.</p>

<p>This module is the base class for plugins.
You include it by using it which also makes itself as a parent class for the plugin and inherts the method setting which has the plugin setting loaded automatically from the config files.</p>

<p>Creating your first plugin <code>Hello</code> is simple like that,
just create a module file called <code>Hello.pm</code> in the folder <code>Nile/Plugin</code> and put the following code in it:</p>

<pre>        package Nile::Plugin::Hello;
        
        our $VERSION = &#39;0.39&#39;;
        
        # this also extends Nile::Plugin, the plugin base class
        use Nile::Plugin;
        
        # optional our alternative for sub new {} called automaticall on object creation
        sub main {

                my ($self, $arg) = @_;
                
                # plugin settings from config files section
                my $setting = $self-&#62;setting();
                #same as
                #my $setting = $self-&#62;setting(&#34;hello&#34;);
                
                # get app context
                my $me = $self-&#62;me;

                # good to setup hooks here
                # run this hook after the &#34;start&#34; method
                $me-&#62;hook-&#62;after_start( sub { 
                        my ($me, @args) = @_;
                        #...
                });
                
        }
        
        sub welcome {
                my ($self) = @_;
                return &#34;Hello world&#34;;
        }

        1;</pre>

<p>Then inside other modules or plugins you can access this plugin as</p>

<pre>        say $me-&#62;plugin-&#62;hello-&#62;welcome;

        # in general, you access plugins like this:
        $me-&#62;plugin-&#62;your_plugin_name-&#62;your_plugin_method([args]);</pre>

<p>Plugins will be loaded automatically on the first time it is used and can be load on application startup in the <code>init</code> method:</p>

<pre>        $app-&#62;init({
                plugin  =&#62; [ qw(hello) ],
        });</pre>

<p>Plugins also can be loaded on application startup by setting the <code>autoload</code> variable in the plugin configuration in the config files.</p>

<p>Example of plugin configuration to auto load on application startup:</p>

<pre>        &#60;plugin&#62;

                &#60;hello&#62;
                        &#60;autoload&#62;1&#60;/autoload&#62;
                &#60;/hello&#62;

        &#60;/plugin&#62;</pre>

<p>At the plugin load, the plugin optional method <code>main</code> will be called automatically if it exists, this is an alternative for the method <code>new</code>.</p>

<p>Inside the plugin methods, you access the application context by the injected method <code>me</code> and you use it in this way:</p>

<pre>        my $me = $self-&#62;me;
        $me-&#62;request-&#62;param(&#34;name&#34;);
        ...
        $me-&#62;config-&#62;get(&#34;email&#34;);</pre>

<p>Plugins that setup <code>hooks</code> must be set to autoload on startup for hooks works as expected.</p>

<h2><a class='u'
name="setting()"
>setting()</a></h2>

<pre>        # inside plugin classes, return current plugin class config settings
        my $setting = $self-&#62;setting();
        my %setting = $self-&#62;setting();

        # 
        # inside plugin classes, return specific plugin class config settings
        my $setting = $self-&#62;setting(&#34;email&#34;);
        my %setting = $self-&#62;setting(&#34;email&#34;);</pre>

<p>Returns plugin class settings from configuration files loaded.</p>

<p>Helper plugin settings in config files must be in inside the plugin tag. The plugin class name can be lower case tag, so plugin <code>Email</code> can be <code>email</code>.</p>

<p>Exampler settings for <code>email</code> plugin class below:</p>

<pre>        &#60;plugin&#62;
                &#60;email&#62;
                        &#60;transport&#62;Sendmail&#60;/transport&#62;
                        &#60;sendmail&#62;/usr/sbin/sendmail&#60;/sendmail&#62;
                &#60;/email&#62;
                &#60;cache&#62;
                        &#60;autoload&#62;1&#60;/autoload&#62;
                &#60;/cache&#62;
        &#60;/plugin&#62;</pre>

<h1><a class='u'
name="Bugs"
>Bugs</a></h1>

<p>This project is available on github at <a href="https://github.com/mewsoft/Nile" class="podlinkurl"
>https://github.com/mewsoft/Nile</a>.</p>

<h1><a class='u'
name="HOMEPAGE"
>HOMEPAGE</a></h1>

<p>Please visit the project&#39;s homepage at <a href="https://metacpan.org/release/Nile" class="podlinkurl"
>https://metacpan.org/release/Nile</a>.</p>

<h1><a class='u'
name="SOURCE"
>SOURCE</a></h1>

<p>Source repository is at <a href="https://github.com/mewsoft/Nile" class="podlinkurl"
>https://github.com/mewsoft/Nile</a>.</p>

<h1><a class='u'
name="SEE_ALSO"
>SEE ALSO</a></h1>

<p>See <a href="http://search.cpan.org/perldoc?Nile" class="podlinkpod"
>Nile</a> for details about the complete framework.</p>

<h1><a class='u'
name="AUTHOR"
>AUTHOR</a></h1>

<p>Ahmed Amin Elsheshtawy, &#1575;&#1581;&#1605;&#1583; &#1575;&#1605;&#1610;&#1606; &#1575;&#1604;&#1588;&#1588;&#1578;&#1575;&#1608;&#1609; &#60;mewsoft@cpan.org&#62; Website: http://www.mewsoft.com</p>

<h1><a class='u'
name="COPYRIGHT_AND_LICENSE"
>COPYRIGHT AND LICENSE</a></h1>

<p>Copyright (C) 2014-2015 by Dr. Ahmed Amin Elsheshtawy &#1575;&#1581;&#1605;&#1583; &#1575;&#1605;&#1610;&#1606; &#1575;&#1604;&#1588;&#1588;&#1578;&#1575;&#1608;&#1609; mewsoft@cpan.org, support@mewsoft.com, <a href="https://github.com/mewsoft/Nile" class="podlinkurl"
>https://github.com/mewsoft/Nile</a>, <a href="http://www.mewsoft.com" class="podlinkurl"
>http://www.mewsoft.com</a></p>

<p>This library is free software; you can redistribute it and/or modify it under the same terms as Perl itself.</p>

<!-- end doc -->

</body></html>
